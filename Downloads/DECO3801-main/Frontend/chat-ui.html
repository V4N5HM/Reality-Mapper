<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AR Chat</title>
  <link rel="stylesheet" href="chat-style.css" />
  <!-- 1ï¸âƒ£ Supabase UMD client (v2.x) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    // 2ï¸âƒ£ Your Supabase project URL + anon key
    const SUPABASE_URL      = 'https://usygmuusjaqoojpiygww.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzeWdtdXVzamFxb29qcGl5Z3d3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4NjA0ODUsImV4cCI6MjA2MDQzNjQ4NX0.88qiGfpTzZ_7QN4EXczIQe9oQWwdtNAlTW1j2o1tAUg';

    // 3ï¸âƒ£ Create the client once, globally
    const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  <style>
    #send-btn, #mic-btn {
      padding: 10px 15px;
      margin-left: 10px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    #send-btn {
      background-color: #54a0ff;
    }
    #mic-btn {
      background-color: #1dd1a1;
      min-width: 60px;
      text-align: center;
    }
    .object-avatar {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div id="background-layer">
    <div class="floating-objects-container">
      <div class="floating-object obj-1">ğŸ</div>
      <div class="floating-object obj-2">ğŸ“š</div>
      <div class="floating-object obj-3">âœï¸</div>
      <div class="floating-object obj-4">ğŸŒ</div>
      <div class="floating-object obj-5">âœï¸</div>
      <div class="floating-object obj-6">ğŸ</div>
      <div class="floating-object obj-7">ğŸ“š</div>
      <div class="floating-object obj-8">ğŸ’¡</div>
      <div class="floating-object obj-9">ğŸ”¬</div>
      <div class="floating-object obj-10">ğŸ¨</div>
      <div class="floating-object obj-11">ğŸ’»</div>
      <div class="floating-object obj-12">ğŸ§©</div>
      <div class="floating-object obj-13">ğŸ“</div>
      <div class="floating-object obj-14">ğŸ§ª</div>
      <div class="floating-object obj-15">ğŸ“</div>
    </div>
  </div>
  <div class="chat-container">
    <div class="chat-header">
      <button class="back-button" id="backBtn">â†</button>
      Chatting with: <span id="objectLabel"></span><br>
      <small id="sessionCodeDisplay" style="font-size: 12px; color: gray;"></small>
    </div>

    <!-- Object avatar and label -->
    <div class="object-info">
      <img id="objectImage" class="object-avatar" alt="Detected Object Image" />
      <div class="object-label" id="objectLabelName"></div>
    </div>

    <!-- Chat message area -->
    <div class="chat-messages" id="chatMessages"></div>

    <!-- Input field and send button -->
    <form class="chat-input" id="chat-form">
      <input type="text" id="message-input" placeholder="Ask me something..." required />
      <button type="button" id="mic-btn">ğŸ¤</button>
      <button type="submit" id="send-btn">Send</button>
    </form>
  </div>

  <script src="chat.js" defer></script>
</body>
</html>
